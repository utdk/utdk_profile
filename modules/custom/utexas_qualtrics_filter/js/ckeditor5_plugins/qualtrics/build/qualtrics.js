!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.qualtrics=t())}(self,(function(){return(()=>{var e={"./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[1]!./theme/css/form.css":e=>{e.exports=".ck.ck-qualtrics-form{padding:var(--ck-spacing-large);display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);grid-column-gap:0;grid-row-gap:var(--ck-spacing-standard);min-width:500px}.ck.ck-qualtrics-form .ck-input{width:inherit}.ck.ck-qualtrics-form .ck.ck-labeled-field-view:first-of-type{grid-area:1/1/2/4}.ck.ck-qualtrics-form .ck.ck-labeled-field-view:nth-of-type(2){grid-area:2/1/3/4}.ck.ck-qualtrics-form .ck.ck-labeled-field-view:nth-of-type(3){grid-area:3/1/4/4}.ck.ck-qualtrics-form .ck-button:first-of-type{grid-area:4/1/4/2}.ck.ck-qualtrics-form .ck-button:nth-of-type(2){grid-area:4/2/4/3}"},"./theme/css/form.css":(e,t,i)=>{var r=i("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=i("./node_modules/postcss-loader/src/index.js??ruleSet[1].rules[1].use[1]!./theme/css/form.css");"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var s={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};r(n,s);e.exports=n.locals||{}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":(e,t,i)=>{"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},s=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function l(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function c(e,t){for(var i={},r=[],n=0;n<e.length;n++){var s=e[n],c=t.base?s[0]+t.base:s[0],a=i[c]||0,u="".concat(c," ").concat(a);i[c]=a+1;var d=l(u),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(h)):o.push({identifier:u,updater:w(h,t),references:1}),r.push(u)}return r}function a(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var n=i.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,i,r){var n=i?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var s=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function f(e,t,i){var r=i.css,n=i.media,s=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function w(e,t){var i,r,n;if(t.singleton){var s=m++;i=p||(p=a(t)),r=h.bind(null,i,s,!1),n=h.bind(null,i,s,!0)}else i=a(t),r=f.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<i.length;r++){var n=l(i[r]);o[n].references--}for(var s=c(e,t),a=0;a<i.length;a++){var u=l(i[a]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}i=s}}}},"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";i.d(r,{default:()=>o});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/ui.js");class n extends t.View{constructor(t){super(t),this.urlInputView=this._createInput("URL","e.g. https://utexas.qualtrics.com/1234"),this.heightInputView=this._createInput("Height","In pixels (e.g., 500). Leave blank for default."),this.titleInputView=this._createInput("Title",'Not visible; used for screen readers. Defaults to "Qualtrics Form"'),this.saveButtonView=this._createButton("Insert",e.icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton("Cancel",e.icons.cancel,"ck-button-cancel"),this.cancelButtonView.delegate("execute").to(this,"cancel"),this.childViews=this.createCollection([this.urlInputView,this.heightInputView,this.titleInputView,this.saveButtonView,this.cancelButtonView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-qualtrics-form"],tabindex:"-1"},children:this.childViews})}render(){super.render(),(0,t.submitHandler)({view:this})}focus(){this.childViews.first.focus()}_createInput(e,i){const r=new t.LabeledFieldView(this.locale,t.createLabeledInputText);return r.label=e,r.infoText=i,r}_createButton(e,i,r){const n=new t.ButtonView;return n.set({label:e,icon:i,tooltip:!0,class:r}),n}isValid(){return this.urlInputView.errorText=null,this.heightInputView.errorText=null,function(e){let t;if(!e.includes("utexas.qualtrics.com"))return!1;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}(this.urlInputView.fieldView.element.value)?!isNaN(this.heightInputView.fieldView.element.value)||(this.heightInputView.errorText="The height must be a number.",!1):(this.urlInputView.errorText="The URL must be a valid Qualtrics link.",!1)}}i("./theme/css/form.css");class s extends e.Plugin{static get requires(){return[t.ContextualBalloon]}init(){const e=this.editor;this._balloon=e.plugins.get(t.ContextualBalloon),this.formView=this._createFormView(),e.ui.componentFactory.add("qualtrics",(()=>{const e=new t.ButtonView;return e.label="Qualtrics",e.tooltip=!0,e.withText=!0,e.icon='<svg version="1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" enable-background="new 0 0 48 48">\n    <path fill="#455A64" d="M36,4H26c0,1.1-0.9,2-2,2s-2-0.9-2-2H12C9.8,4,8,5.8,8,8v32c0,2.2,1.8,4,4,4h24c2.2,0,4-1.8,4-4V8 C40,5.8,38.2,4,36,4z"/>\n    <path fill="#fff" d="M36,41H12c-0.6,0-1-0.4-1-1V8c0-0.6,0.4-1,1-1h24c0.6,0,1,0.4,1,1v32C37,40.6,36.6,41,36,41z"/>\n    <g fill="#90A4AE">\n        <path d="M26,4c0,1.1-0.9,2-2,2s-2-0.9-2-2h-7v4c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V4H26z"/>\n        <path d="M24,0c-2.2,0-4,1.8-4,4s1.8,4,4,4s4-1.8,4-4S26.2,0,24,0z M24,6c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2 S25.1,6,24,6z"/>\n    </g>\n    <g fill="#CFD8DC">\n        <rect x="21" y="20" width="12" height="2"/>\n        <rect x="15" y="19" width="4" height="4"/>\n    </g>\n    <g fill="#03A9F4">\n        <rect x="21" y="29" width="12" height="2"/>\n        <rect x="15" y="28" width="4" height="4"/>\n    </g>\n</svg>\n',this.listenTo(e,"execute",(()=>{this._showUI()})),e}))}_createFormView(){const e=this.editor,i=new n(e.locale);return this.listenTo(i,"submit",(()=>{i.isValid()&&(this._generateOutput(i,e),this._hideUI())})),this.listenTo(i,"cancel",(()=>{this._hideUI()})),(0,t.clickOutsideHandler)({emitter:i,activator:()=>this._balloon.visibleView===i,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()}),i}_generateOutput(e,t){const i=e.urlInputView.fieldView.element.value,r=e.titleInputView.fieldView.element.value,n=parseInt(e.heightInputView.fieldView.element.value);var s="[embed]"+i;n&&(s+=" | height:"+String(n)),r&&(s+=" | title:"+r),s+="[/embed]";const o=t.data.processor.toView("<p>"+s+"</p>"),l=t.data.toModel(o);t.model.change((e=>{t.model.insertContent(l)}))}_showUI(){this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.focus()}_hideUI(){this.formView.urlInputView.fieldView.value="",this.formView.heightInputView.fieldView.value="",this.formView.titleInputView.fieldView.value="",this.formView.element.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus()}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;let i=null;return i=()=>e.domConverter.viewRangeToDom(t.selection.getFirstRange()),{target:i}}}const o={Qualtrics:s}})(),r=r.default})()}));